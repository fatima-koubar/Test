I need a unit test for this file with jasmine

export class ApplePaySessionBuilder {
  private session: typeof window.ApplePaySession;
  private applePaySessionPayload: ApplePaySessionPayload;

  constructor(request: ApplePayPaymentRequest, applePaySessionPayload: ApplePaySessionPayload) {
    this.session = new (window as any).ApplePaySession(3, request);
    this.applePaySessionPayload = applePaySessionPayload;
  }

  public withValidationMerchantEventHandler(
    callback: (
      merchantValidationRequest: MerchantValidationRequest,
    ) => Promise<MerchantSession | undefined>,
  ): this {
    this.session.onvalidatemerchant = async (event: ApplePayValidateMerchantEvent) => {
      try {
        let merchantValidationRequest: MerchantValidationRequest = {
          merchant_identifier: this.applePaySessionPayload.merchant_identifier,
          initiative_context: this.applePaySessionPayload.domain ?? window.location.hostname,
          validation_url: event.validationURL,
          display_name: this.applePaySessionPayload.merchant_name,
          collection_session_id: this.applePaySessionPayload.collection_session_id,
        };

        const validationData = await callback(merchantValidationRequest);

        this.session.completeMerchantValidation(validationData);
      } catch (error) {
        this.session.abort();
      }
    };

    return this;
  }

  public withCancelEventHandler(callback: (() => void) | undefined): this {
    if (callback) this.session.oncancel = callback;
    return this;
  }

  public withPaymentAuthorizedEventHandler(callback: (token: string) => Promise<void>) {
    this.session.onpaymentauthorized = async (event: ApplePayPaymentAuthorizationEvent) => {
      try {
        event.payment.token.paymentMethod.network =
          event.payment.token.paymentMethod.network.toLowerCase();

        await callback(btoa(JSON.stringify(event.payment.token)));

        this.session.completePayment(window.ApplePaySession.STATUS_SUCCESS);
      } catch (error) {
        this.session.completePayment(window.ApplePaySession.STATUS_FAILURE);
      }
    };

    return this;
  }

  public build(): typeof window.ApplePaySession {
    return this.session;
  }
}

and I have created this type
declare global {
  interface Window {
    ApplePaySession: {
      canMakePayments(): boolean;
      completePayment(status: number): void;
      begin(): void;
      abort(): void;

      onvalidatemerchant: (event: ApplePayValidateMerchantEvent) => void;
      completeMerchantValidation(merchantSession: MerchantSession | undefined): void;
      onpaymentauthorized: (event: ApplePayPaymentAuthorizationEvent) => void;
      applePayCapabilities(merchantIdentifier: string): Promise<PaymentCredentialStatusResponse>;
      oncancel: () => void;

      STATUS_SUCCESS: number;
      STATUS_FAILURE: number;
    };
  }
}
