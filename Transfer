I have this error : 
Error: Cannot override provider when the test module has already been instantiated. Make sure you are not using `inject` before `overrideProvider`.

describe('ApplePayComponent', () => {
  let component: ApplePayComponent;
  let fixture: ComponentFixture<ApplePayComponent>;

  beforeEach(async () => {
   
    TestBed.configureTestingModule({
      imports: [ApplePayComponent],
      providers: [
        { provide: PAYMENT_SESSION_CONTEXT, useValue: INTEGRATION_TYPES.PAYMENT_PAGE },
        { provide: DOCUMENT, useValue: document },
        importProvidersFrom([TranslateModule.forRoot()]),
      ],
    }).compileComponents();

    fixture = TestBed.createComponent(ApplePayComponent);
    component = fixture.componentInstance;

    fixture.componentRef.setInput('paymentMeanHref', 'https://monetico-services.com/c9da4fcc8');
    fixture.componentRef.setInput('amount', { currency: 'EUR', exponent: 100, value: 100 } as any);
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });

  it('should post message when integration type is PAYMENT_COMPONENT', () => {
    spyOn(window.parent, 'postMessage');

    TestBed.overrideProvider(PAYMENT_SESSION_CONTEXT, {
      useValue: INTEGRATION_TYPES.PAYMENT_COMPONENT,
    });

    fixture = TestBed.createComponent(ApplePayComponent);
    component = fixture.componentInstance;
    fixture.componentRef.setInput('paymentMeanHref', '');
    fixture.componentRef.setInput('amount', {});

    fixture.detectChanges();

    component.handleClick();

    expect(window.parent.postMessage).toHaveBeenCalled();
  });
});
