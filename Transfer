import { ComponentFixture, TestBed } from '@angular/core/testing';
import { RedirectionComponent } from './redirection.component';
import { RedirectService } from '../services/redirect.service';
import { TranslateService } from '@ngx-translate/core';
import { ViewContainerRef } from '@angular/core';
import { PAYMENT_MEAN_TYPES } from '../constants/payment-mean-types';

describe('RedirectionComponent', () => {
  let component: RedirectionComponent;
  let fixture: ComponentFixture<RedirectionComponent>;
  let redirectService: jasmine.SpyObj<RedirectService>;
  let translateService: jasmine.SpyObj<TranslateService>;

  beforeEach(async () => {
    redirectService = jasmine.createSpyObj('RedirectService', [
      'setViewContainerRef',
      'redirect',
    ]);

    translateService = jasmine.createSpyObj('TranslateService', ['instant']);
    translateService.instant.and.callFake((key: string) => key);

    await TestBed.configureTestingModule({
      imports: [RedirectionComponent],
      providers: [
        { provide: RedirectService, useValue: redirectService },
        { provide: TranslateService, useValue: translateService },
      ],
    }).compileComponents();

    fixture = TestBed.createComponent(RedirectionComponent);
    component = fixture.componentInstance;

    // Required input signals
    fixture.componentRef.setInput('paymentSessionId', 'session-123');
    fixture.componentRef.setInput('redirectToParent', false);
  });
